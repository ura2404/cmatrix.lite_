{#
    Admin`ка
#}
{% extends "/CmatrixWeb/templates/comlogin.twig" %}

{% block style %}
    {{ parent() }}
    <link rel="stylesheet/less" type="text/css" href="res/CmatrixWeb/admin.less"/>
{% endblock %}

{% block js %}
    {{ parent() }}
    <script type="module" src="res/CmatrixWeb/admin.js"></script>
{% endblock %}

{% block main %}
    {{ parent() }}
    <div class="container mx-auto flex flex-wrap">
        {% for block in blocks %}
            {% set enable = block.enable ? block.enable : false %}
            {% set visible = block.visible ? block.visible : false %}
            
            {% if _context.visible %}
                {% if _context.enable %}
                    <a class="md:mx-2 mx-auto rounded overflow-hidden bg-gray-200 w-80 h-44 flex m-2 flex-col border-2 border-white hover:border-2 hover:border-green-400 " href="{{ block.url }}">
                        <span class="text-center font-bold bg-gray-400 p-2 text-white">{{ block.name }}</span>
                        <i class="p-1 text-center fa-3x text-gray-700 {{ block.icon }}"></i>
                        <span class="text-center mb-1 mt-auto mx-2 h-20 overflow-y-auto">{{ block.info }}</span>
                    </a>
                {% else %}
                    <div class="md:mx-2 mx-auto rounded overflow-hidden bg-gray-200 w-80 h-44 flex m-2 flex-col opacity-30 border-2 border-white">
                        <span class="text-center font-bold bg-gray-300 p-2">{{ block.name }}</span>
                        <i class="p-1 text-center fa-3x text-gray-700 {{ block.icon }}"></i>
                        <span class="text-center mb-1 mt-auto mx-2 h-20 overflow-y-auto">{{ block.info }}</span>
                    </div>
                {% endif %}
            {% endif %}
            
        {% endfor %}
    </div>
{% endblock %}

{% block main1 %}

    <div class="container m-auto h-full w-full flex">
        
        {# --- левое меню --- #}
        <ul id="wi-ad-menu" class="cm-menu overflow-y-auto bg-gray-200 cursor-pointer flex-shrink-0">
            <li class="cm-menu-item flex"><a class="cm-no-click w-full px-2 md:px-4 py-2 hover:bg-gray-300" href="{{ url.dictionaries }}"><i class="text-gray-700 w-7 fab fa-elementor"></i><span>Справочники</span></a></li>
            <li class="cm-menu-item flex"><a class="cm-no-click w-full px-2 md:px-4 py-2 hover:bg-gray-300" href="{{ url.tables }}"><i class="text-gray-700 w-7 fas fa-table"></i><span>Таблицы</span></a></li>
            <li class="cm-menu-item flex"><a class="cm-no-click w-full px-2 md:px-4 py-2 hover:bg-gray-300" href="{{ url.messages }}"><i class="text-gray-700 w-7 far fa-comments"></i><span>Сообщения</span></a></li>
            <li class="cm-h-devider text-gray-400"></li>
            <li class="cm-menu-item flex" title="Настройки системы"><a class="cm-no-click w-full px-2 md:px-4 py-2 hover:bg-gray-300" href="{{ url.setup }}"><i class="text-gray-700 w-7 fas fa-cogs"></i><span>Настройки</span></a></li>
        </ul>
        
        {# --- контент --- #}
        <div class="bg-gray-100 w-full h-full">
            {% block main_container %}{% endblock %}
        </div>
        
    </div>
{% endblock %}